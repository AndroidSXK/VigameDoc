# 3.计费能力

### 3.1 初始化（必接）

```text
PayNative.init();
```

### 3.2 设置支付回调

```text
PayNative.setPayResultCallback(new PayManager.PayCallback() {

    @Override
    public void onPayFinish(PayParams params) {
        // TODO Auto-generated method stub
        switch (params.getPayResult()){
            //支付成功
            case PayDef.PAY_RESULT_SUCCESS:
                break;
            //支付失败
            case PayDef.PAY_RESULT_FAIL:
                break;
            //取消支付
            case PayDef.PAY_RESULT_CANCEL:
                break;
        }
    }

    @Override
    public void onInitPayAgentFinish(BasePayAgent arg0) {
        // TODO Auto-generated method stub

    }
});
```

### 3.3 该市场是否支持退出（必接）

```text
PayNative.isExitGame();
```

### 3.4 调用退出（必接）

```text
PayNative.openExitGame();
```

**因游戏有自己的退出界面，建议按照如下方法判断：**

```text
if(PayNative.isExitGame()){
    //通过调用下面的方法弹出渠道的退出
    PayNative.openExitGame();
}
else{
    //这里弹出引擎的退出界面
    ...
}
```

### 3.5 获取支付按钮类型

```text
PayNative.getButtonType(payID);
```

### 3.6 获取所在的市场类型

```text
PayNative.getMarketType();
```

### 3.7 获取礼包控制信息

```text
PayNative.getGiftCtrlFlagUse(int ctrl);
```

{% hint style="info" %}
ctrl：控制参数

返回值：控制参数

控制参数说明：  
1-新手礼包 - 进入游戏首页时如果没购买过新手礼包则弹出  
2-快冲 - 用户虚拟货币不足时弹出  
3-限时礼包 - 进入游戏首页时如果已经买过新手礼包则弹出  
4-过关奖励 - 过关时弹出  
5-vip礼包 - 进入关卡选择页时弹出 6-今日特价  
7-实惠大礼包  
8-商城
{% endhint %}

### 3.8 调用支付

```text
PayNative.orderPay(id);
```

id:计费点ID

```text
orderPay(int id,String userdata);
```

id:游戏中定义的计费点id  
userdata:用户数据

```text
orderPay(int id,int price，String userdata);
```

id:游戏中定义的计费点id  
price:计费点的价格，单位为分。  
userdata:用户数据

```text
orderPay(int id, int price, int payType，String userdata);
```

id:游戏中定义的计费点id  
price:计费点的价格，单位为分。  
payType:指定的支付类型。eg:PayDef.PAY\_TYPE\_MM  
userdata:用户数据

### 3.9 是否需要有更多游戏按钮

```text
PayNative.isMoreGame();
```

### 3.10 打开更多游戏

```text
PayNative.openMoreGame();
```

### 3.11 跳转应用商店的某个应用详情页

```text
PayNative.openMarket(String package);
```

package:跳转应用的包名

### 3.12 跳转当前应用的商店详情页

```text
PayNative.openAppraise();
```

## 

